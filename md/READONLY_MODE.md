# 只读模式（查看详情功能）

## 概述
只读模式用于查看记录的详细信息，所有字段都以禁用状态显示，用户无法编辑。该功能通过 `view` 操作实现。

## 使用方法

### 配置 view 操作
在表格的 `actions` 配置中添加 `view` 操作：

```javascript
const tableConfig = reactive({
  // ... 其他配置
  actions: [
    {
      key: 'view',
      label: '查看',
      icon: 'eye',
      message: '查看成功',
      callback: (records) => {
        console.log('查看:', records);
      },
    },
    // 其他操作...
  ],
});
```

### 功能特性

#### 1. 单条记录查看
- 选择一条记录，点击"查看"按钮
- 直接打开只读弹窗，显示该记录的所有信息
- 标题显示为"查看详情"
- 所有字段禁用显示，用户只能查看不能修改
- 按钮显示为"关闭"（点击关闭弹窗）

#### 2. 多条记录查看
- 选择多条记录，点击"查看"按钮
- 显示一个人性化的记录列表弹窗
- 列表显示每条记录的前3个字段信息预览
- 用户可以点击每条记录旁的"查看"按钮单独查看详情
- 逐条查看各个记录的完整信息

### 只读弹窗特点

#### 表单样式
- 所有输入控件都禁用
- 支持所有11种表单控件类型（input、number、select 等）
- 字段信息以只读形式显示

#### 弹窗按钮
- 确定按钮文本改为"关闭"
- 取消按钮隐藏
- 无需验证表单，直接关闭

#### 支持的控件类型
只读模式支持所有表单控件类型的查看：
- `input` - 文本输入框
- `number` - 数字输入框  
- `textarea` - 文本域
- `select` - 下拉选择
- `radio` - 单选框
- `checkbox` - 复选框
- `date` - 日期选择器
- `time` - 时间选择器
- `datetime` - 日期时间选择器
- `switch` - 开关
- `slider` - 滑块

### 代码示例

#### 完整配置示例
```javascript
// TableExample.vue
const tableConfig = reactive({
  columns: [
    {
      title: '姓名',
      dataIndex: 'name',
      form: {
        type: 'input',
        required: true,
        creatable: true,
        editable: true,
      },
    },
    {
      title: '邮箱',
      dataIndex: 'email',
      form: {
        type: 'input',
        required: true,
        creatable: true,
        editable: true,
      },
    },
    // 更多列...
  ],
  
  actions: [
    {
      key: 'view',
      label: '查看',
      icon: 'eye',
      callback: (records) => {
        // 可选：在这里处理查看逻辑
        console.log('查看记录:', records);
      },
    },
    {
      key: 'edit',
      label: '编辑',
      icon: 'edit',
    },
    // 更多操作...
  ],
  
  showForm: true, // 必须启用表单才能使用查看功能
});
```

### 交互流程

#### 单条记录
```
1. 用户选择一条数据
2. 点击"查看"按钮
3. 直接打开只读表单弹窗
4. 用户查看完信息后点击"关闭"按钮
5. 弹窗关闭
```

#### 多条记录
```
1. 用户选择多条数据
2. 点击"查看"按钮
3. 显示记录列表选择弹窗
4. 用户选择要查看的记录
5. 打开该记录的只读表单
6. 用户可以返回列表选择其他记录继续查看
7. 完成后关闭所有弹窗
```

### 注意事项

1. **必须启用表单**：`showForm: true` 必须设置，否则查看功能无法使用

2. **列配置要求**：需要在列配置中为要查看的字段添加 `form` 配置

3. **只读控件行为**：
   - 所有输入都被禁用
   - `select`、`radio`、`checkbox` 等选择器仍会显示选项，但无法修改
   - 用户可以使用复制等浏览器功能查看内容

4. **多条记录处理**：
   - 自动显示选择列表
   - 列表显示每条记录前3个字段的预览信息
   - 支持无限条记录的查看

5. **字段显示控制**：
   - `creatable` 和 `editable` 配置在只读模式下被忽略
   - 所有有 `form` 配置的字段都会在只读弹窗中显示

### 与其他模式的对比

| 特性 | create | edit | readonly |
|------|--------|------|----------|
| 标题 | 新增记录 | 编辑记录 | 查看详情 |
| 字段可编辑 | 是 | 是 | 否 |
| 需要验证 | 是 | 是 | 否 |
| 点击确定效果 | 提交数据 | 提交数据 | 关闭弹窗 |
| 显示取消按钮 | 是 | 是 | 否 |
| 支持多条记录 | 否 | 否 | 是 |

### 常见问题

**Q: 只读模式下如何编辑？**
A: 只读模式仅用于查看，不支持编辑。如需编辑，请使用"编辑"操作。

**Q: 为什么选择多条数据后点击查看没有直接打开？**
A: 这是出于用户体验考虑。当选择多条时，先显示列表让用户选择要查看的具体记录，避免只显示第一条而忽视其他记录。

**Q: 多条记录列表中如何显示更多信息？**
A: 列表预览显示前3个字段。若需要更多信息，可以点击"查看"打开完整的只读表单。

**Q: 只读模式支持隐藏字段吗？**
A: 只读模式会显示所有有 `form` 配置的字段。如需隐藏某些字段，可以不为其添加 `form` 配置。

**Q: 如何自定义只读表单的样式？**
A: 只读表单使用与编辑表单相同的 `TableForm` 组件和样式。可以通过修改 `TableForm.vue` 中的样式来自定义。
